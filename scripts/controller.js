const ethers = require('ethers');
const { defaultAbiCoder, Interface } = require ("ethers/lib/utils");
const async = require('async');
const bytecode = '0x608060405234801561001057600080fd5b50604051610596380380610596833981810160405281019061003291906102ed565b60008167ffffffffffffffff811115610074577f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6040519080825280602002602001820160405280156100a25781602001602082028036833780820191505090505b50905060005b82811015610242576000735c69bee701ef814a2b6a3edd4b1652cb9cc5aa6f73ffffffffffffffffffffffffffffffffffffffff16631e3dd18b83876100ee919061045d565b6040518263ffffffff1660e01b815260040161010a9190610409565b602060405180830381600087803b15801561012457600080fd5b505af1158015610138573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061015c919061029b565b90508073ffffffffffffffffffffffffffffffffffffffff166370a08231826040518263ffffffff1660e01b815260040161019791906103cc565b602060405180830381600087803b1580156101b157600080fd5b505af11580156101c5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101e991906102c4565b838381518110610222577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200260200101818152505050808061023a906104ef565b9150506100a8565b5060008160405160200161025691906103e7565b60405160208183030381529060405290506020830260208201f35b60008151905061028081610567565b92915050565b6000815190506102958161057e565b92915050565b6000602082840312156102ad57600080fd5b60006102bb84828501610271565b91505092915050565b6000602082840312156102d657600080fd5b60006102e484828501610286565b91505092915050565b6000806040838503121561030057600080fd5b600061030e85828601610286565b925050602061031f85828601610286565b9150509250929050565b600061033583836103ae565b60208301905092915050565b61034a816104b3565b82525050565b600061035b82610434565b610365818561044c565b935061037083610424565b8060005b838110156103a15781516103888882610329565b97506103938361043f565b925050600181019050610374565b5085935050505092915050565b6103b7816104e5565b82525050565b6103c6816104e5565b82525050565b60006020820190506103e16000830184610341565b92915050565b600060208201905081810360008301526104018184610350565b905092915050565b600060208201905061041e60008301846103bd565b92915050565b6000819050602082019050919050565b600081519050919050565b6000602082019050919050565b600082825260208201905092915050565b6000610468826104e5565b9150610473836104e5565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff038211156104a8576104a7610538565b5b828201905092915050565b60006104be826104c5565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b60006104fa826104e5565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82141561052d5761052c610538565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b610570816104b3565b811461057b57600080fd5b50565b610587816104e5565b811461059257600080fd5b5056fe';

require('dotenv').config();


const UNI2_FACTORY = '0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f'; //deployed: 10000835 

const main = async function () {
    const provider = new ethers.providers.WebSocketProvider(process.env.PROV);
    let inputData = defaultAbiCoder.encode(["uint256", "uint256"],[0, 2]);
    const payload = bytecode.concat(inputData.slice(2));
    const returnedData = await provider.call({data: payload});
    console.log(returnedData);

    const [decoded] = defaultAbiCoder.decode(['uint256[]'], returnedData);
    console.log(decoded);

}



main();